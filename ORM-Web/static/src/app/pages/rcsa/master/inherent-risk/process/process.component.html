<span (click)="pageloadData()" ><b>Process</b></span>
        <mat-card class="mat-elevation-z4" >
          <mat-card-header>
            
          </mat-card-header>
          <mat-card-content>
        <form [formGroup]="GridFormsProcessRisk" autocomplete="off">
            <ng-container formArrayName="GridRows">
            <mat-table [dataSource]="dataSource" matSort>
                    <ng-container matColumnDef="Index">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>#</mat-header-cell>
                        <mat-cell *matCellDef="let row;let i = index" [formGroup]="row"> {{GridFormsProcessRisk.get('GridRows')?.value[i].Index}} </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="Name">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>Process</mat-header-cell>
                        <mat-cell *matCellDef="let row;let i = index" [formGroup]="row">
                            <mat-form-field
                                [appearance]="GridFormsProcessRisk.get('GridRows')?.value[i].isEditable? 'none' : 'legacy'">
                                <input matInput type="text" formControlName="Name"
                                    [readonly]="GridFormsProcessRisk.get('GridRows')?.value[i].isEditable">
                            </mat-form-field>
                        </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="Action">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>Action</mat-header-cell>
                        <mat-cell *matCellDef="let row;let i = index" [formGroup]="row">
                            <button mat-icon-button class="material-icons app-toolbar-menu save-button"
                                matTooltip="Save Changes" (click)="saveEditData(GridFormsProcessRisk,i)" [disabled]="!row.valid"
                                *ngIf="!GridFormsProcessRisk.get('GridRows')?.value[i]?.isEditable" color="primary">
                                <mat-icon>check_circle</mat-icon>
                            </button>

                            <button mat-icon-button class="material-icons app-toolbar-menu cancel-button"
                                matTooltip="Cancel Changes" color="warn" (click)="CancelSVO(GridFormsProcessRisk,i)"
                                *ngIf="!GridFormsProcessRisk.get('GridRows')?.value[i]?.isEditable">
                                <mat-icon>cancel</mat-icon>
                            </button>

                            <button mat-icon-button class="material-icons app-toolbar-menu save-button"
                                *ngIf="GridFormsProcessRisk.get('GridRows')?.value[i]?.isEditable" matTooltip="Edit" color="primary"
                                (click)="editData(GridFormsProcessRisk,i)">
                                <mat-icon>edit</mat-icon>
                            </button>

                            <!-- <button mat-icon-button class="material-icons app-toolbar-menu delete-button"
                                *ngIf="GridFormsProcessRisk.get('GridRows').value[i].isEditable" matTooltip="Delete" color="warn">
                                <mat-icon>delete</mat-icon>
                            </button> -->
                            <!-- <button mat-icon-button>
                                <mat-icon (click)="editProcessRisk(row)" aria-hidden="false" aria-label="Edit"
                                    fontIcon="edit">
                                </mat-icon>
                            </button> -->
                        </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="Status">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>Status</mat-header-cell>
                        <mat-cell *matCellDef="let row;let i = index" [formGroup]="row" >
                            <mat-slide-toggle [checked]="GridFormsProcessRisk.get('GridRows')?.value[i]?.IsActive" (change)="changed(row)">
                            </mat-slide-toggle> 
                            <span *ngIf="GridFormsProcessRisk.get('GridRows')?.value[i]?.IsActive">Enabled</span>
                            <span *ngIf="!GridFormsProcessRisk.get('GridRows')?.value[i]?.IsActive">Disabled</span>
                        </mat-cell>
                    </ng-container>
                    <mat-header-row *matHeaderRowDef="displayedProcessRiskColumns"></mat-header-row>
                    <mat-row *matRowDef="let row; columns: displayedProcessRiskColumns;"></mat-row>
                </mat-table>
            </ng-container>
        </form>
          </mat-card-content>
    <mat-error *ngIf="saveerror">{{saveerror}}</mat-error>
    <mat-card-actions class="">
        <div fxLayout="row" fxLayoutAlign="end center">
            <button mat-mini-fab color="warn" aria-label="add process risk" (click)="initiatAddProcessRisk()"
                *ngIf="!addProcessRiskdg">
                <mat-icon>add</mat-icon>
            </button>
            <form [formGroup]="processRiskForm" autocomplete="off" *ngIf="addProcessRiskdg">
                    <input formControlName="txtrateid" hidden="true">
                    <mat-form-field appearance="fill" fxFlex.xs="100%" fxFlex.lg="60%" fxFlex.sm="60%" >
                        <mat-label>Process Name</mat-label>
                        <input matInput formControlName="txtratename">
                    </mat-form-field>
                    <!-- <mat-form-field appearance="fill" fxFlex.xs="100%" fxFlex.lg="20%" fxFlex.sm="20%" fxFlexOffset="10px" >
                        <mat-label>Color Code</mat-label>
                        <input matInput [(colorPicker)]="color" formControlName="txtcolorcode" (colorPickerChange)="colorchanged()" />
                        <div class="colorbox" [style.background]="color" matSuffix>
                        </div>
                    </mat-form-field> -->
                    <!-- <mat-form-field appearance="fill" fxFlex.xs="100%" fxFlex.lg="25%" fxFlex.sm="25%" fxFlexOffset="10px">
                        <mat-label>Color Name</mat-label>
                        <input matInput formControlName="txtcolorname">
                    </mat-form-field> -->
            <button fxFlexOffset="10px" [disabled]="!processRiskForm.valid" mat-mini-fab color="warn"
                aria-label="add process risk" (click)="saveData()" *ngIf="addProcessRiskdg">
                <mat-icon>check</mat-icon>
            </button>
            <button mat-mini-fab fxFlexOffset="10px" class="buttongray" aria-label="add process risk"
                (click)="cancelProcessRisk()" *ngIf="addProcessRiskdg">
                <mat-icon>close</mat-icon>
            </button>
                </form>
                
            </div>
          </mat-card-actions>
        </mat-card>