<mat-toolbar class="fontSize">
    <!-- <button mat-icon-button class="back-icon" aria-label="Logout" (click)="navigateToPreviousPage()" matTooltip="Navigate back to RCSA Summary"> -->
        <!-- <button mat-raised-button color="primary" style="display:inline-block; padding:0vh 1vh;border-radius:100vw;padding-bottom: 0.6vh;margin-right: 10px;"
        (click)="navigateToPreviousPage()" matTooltip="Navigate back to RCSA Summary">
            <span style="font-size:16px; margin-right:10px;">&#11164;</span>Back
        </button> -->
        <button mat-raised-button color="primary" style="display:inline-block; padding:0vh 1vh;border-radius:100vw;margin-right: 10px;"
        (click)="navigateToPreviousPage()" matTooltip="Navigate back to RCSA Summary">
            <span style="font-size:16px; margin-right:10px;">&#11164;</span>Back
        </button>
    <!-- </button> -->
    <span>Self Assessment Summary</span>
    <span class="spacer"></span>
</mat-toolbar>
<div class="container">
    <mat-action-row style="padding-bottom: 0px;padding-right: 24px ;padding-top: 20px;">
        <!-- <button (click)="navigateToPreviousPage()"><mat-icon style="height: 25px;
            position: relative;
            top: 2px;
            right: 3px">arrow_back</mat-icon>
            <span style="position: relative;bottom: 6px; font-size: 15px;">{{'Back'}}</span>
        </button> -->
        <span class="spacer"></span>
        <div class="assesment-button">
            <button mat-raised-button class="submitassessment" color="primary" (click)="submitScheduleAssessment()"
                *ngIf="scheduleAssessmentID != null && canSubmitAccess() && isShowSubmitbtn && UnitNames" style="height: 5vh;"><img
                src="./assets/images/icon-send.svg" alt="">
                Submit
            </button>
            <span class="spacer"></span>
            <mat-form-field appearance="fill" style="margin-right: 15px;">
                <mat-label>Search</mat-label>
                <input matInput placeholder="Eg. high risk" #input (keyup)="applyFilter($event)">
            </mat-form-field>
            <span [ngClass]="showexportData ? 'showExcel' : 'hideExcel' " (click)="exportAsXLSX()" class="mat-button-wrapper" matTooltip="Export to Excel"><img
                    src="assets/icon-excel.svg" style="opacity:Â 1;"></span>
        </div>
    </mat-action-row>
<mat-action-row style="padding: 0px;border: 0px;">
    <div fxLayout="row wrap" fxLayoutAlign="center stretch">
        <div fxLayout="row wrap" fxLayoutGap="10px grid" fxFlex="15" fxFlexOffset="3" fxLayoutAlign="center stretch">
            <mat-card class="mat-elevation-z4 ScheduleGroup" fxFlex.lg="98" fxFlex.md="98" fxFlex.sm="100"
                fxFlexOffset.md="1">
                <mat-card-header>

                </mat-card-header>
                <mat-card-content>
                    <div fxLayout="column" class="AssessmentCard" fxFlexAlign="start center">
                        <div fxLayout="row" class="SubAssessmentCard" fxLayoutAlign="center center"
                            *ngFor="let data of dataSourceAssessmentCard;let i = index">
                            <div class="LeftSideWidget" fxLayout="column" fxFlex="100" fxLayoutAlign="center center"
                                (click)="getStatusFilter(data.ScheduleInherentRiskStatusID,i)" [ngClass] = "i == indexData ? 'active' : 'inactive'">
                                <span class="TextboxSpan">
                                    <b> {{data.TotalValue}}</b>
                                </span>
                                <span class="TextboxSpan">
                                    <b> {{data.ScheduleInherentRiskStatusName}}</b>
                                </span>
                            </div>
                        </div>
                    </div>

                </mat-card-content>
                <mat-card-actions>

                </mat-card-actions>
            </mat-card>
        </div>
        <div fxLayout="row wrap" fxLayoutGap="10px grid" fxFlex="83" fxLayoutAlign="center start">
            <mat-card class="mat-elevation-z4 customDetailCard" fxFlex="98" fxFlex.md="98" fxFlex.sm="100" fxFlexOffset.lg="1"
                fxFlexOffset.md="1" style="padding: 0px;">
                <mat-card-content >
                    <div class="container" fxLayout="row" fxFlexAlign="space-evenly center" style="background-color: #e5e5e5 !important;">
                        <div class="Proposeddateinfo" fxLayout="column" fxFlex="33">
                          <div class="d-flex" style="margin-bottom: 7px;">
                            <b>RCSA Code:</b>&nbsp;<span >{{rcsaSelfAssessmentHeader?.RCSACode }}</span>
                          </div>
                          <div class="d-flex">
                            <b>Period:</b> &nbsp; <span>{{rcsaSelfAssessmentHeader?.Period}}</span>
                          </div>
                        </div>
                        <div class="Proposeddateinfo" fxLayout="column" fxFlex="33">
                            <div class="d-flex" style="margin-bottom: 7px;">
                                <b>Proposed Start Date:</b> &nbsp; <span>{{(rcsaSelfAssessmentHeader?.ProposedStartDate != null )? (rcsaSelfAssessmentHeader.ProposedStartDate | date:'dd MMM yyyy'):" - "}}</span>
                            </div>
                            <div class="d-flex">
                                <b>Proposed End Date:</b> &nbsp; <span>{{(rcsaSelfAssessmentHeader?.ProposedCompletionDate != null) ? (rcsaSelfAssessmentHeader.ProposedCompletionDate | date:'dd MMM yyyy'):" - "}}</span>
                            </div>
                          </div>
                        <div class="Proposeddateinfo" fxLayout="column" fxFlex="33">
                            <div class="d-flex" style="margin-bottom: 7px;">
                                <b>Status:</b> &nbsp;  <span>{{this.SelfAssessmentSummaryList.length ? rcsaSelfAssessmentHeader?.Status : ''}}</span>
                            </div>
                          <div class="d-flex">
                            <b>Total Approved Percentage:</b> &nbsp; <span>{{ (this.SelfAssessmentSummaryList.length == 0 && rcsaSelfAssessmentHeader?.TotalPercentage == 0) ? " ": rcsaSelfAssessmentHeader?.TotalPercentage+' %'}} </span>
                          </div>
                        </div>
                      </div>
                </mat-card-content>

            </mat-card>

            <mat-card class="mat-elevation-z4" fxFlex="98" fxFlex.md="98" fxFlex.sm="100" fxFlexOffset.lg="1"
                fxFlexOffset.md="1">
                <mat-card-header>

                </mat-card-header>
                <mat-card-content class="tablecontent">
                    <table id="SelfAssesssmentTable" mat-table [dataSource]="dataSource" matSort multiTemplateDataRows>
                        <ng-container matColumnDef="SLNo">
                            <th mat-header-cell *matHeaderCellDef>SL #</th>
                            <td mat-cell *matCellDef="let row" [matTooltip]="getTooltip(row,'SLNO')">
                                {{row.SLNO}} </td>
                        </ng-container>
                        <ng-container matColumnDef="Group">
                            <th mat-header-cell *matHeaderCellDef [hidden]="showRiskStatus">Group</th>
                            <td mat-cell *matCellDef="let row" [matTooltip]="getTooltip(row,'GroupName')"
                                [hidden]="showRiskStatus"> {{row.GroupName}} </td>
                        </ng-container>
                        <ng-container matColumnDef="Unit">
                            <th mat-header-cell *matHeaderCellDef [hidden]="showRiskStatus">Unit
                            </th>
                            <td mat-cell *matCellDef="let row" [matTooltip]="getTooltip(row,'UnitName')"
                                [hidden]="showRiskStatus"> {{row.UnitName}} </td>
                        </ng-container>
                        <ng-container matColumnDef="Risk">
                            <th mat-header-cell *matHeaderCellDef>Risk</th>
                            <td mat-cell *matCellDef="let row" [matTooltip]="getTooltip(row,'Risk')"> {{row.Risk}} </td>
                        </ng-container>
                        <ng-container matColumnDef="ScheduleInherentRiskStatus">
                            <th mat-header-cell *matHeaderCellDef>Status</th>
                            <td mat-cell *matCellDef="let row" [matTooltip]="getTooltip(row,'ScheduleInherentRiskStatusName')">
                                {{row.ScheduleInherentRiskStatusName}} </td>
                        </ng-container>
                        <ng-container matColumnDef="OverallInherentRiskRating">
                            <th mat-header-cell *matHeaderCellDef [hidden]="showInherentRiskStatus">Inherent
                                Risk Rating</th>
                            <td mat-cell *matCellDef="let row" [style.background]="row.OverallInherentRiskColor"
                                [matTooltip]="getTooltip(row,'OverallInherentRiskRating')"
                                [hidden]="showInherentRiskStatus">
                                {{row.OverallInherentRiskRating}} </td>
                        </ng-container>
                        <ng-container matColumnDef="OverallControlEnvironment">
                            <th mat-header-cell *matHeaderCellDef>Control Environment</th>
                            <td mat-cell *matCellDef="let row"
                                [style.background]="row.OverallControlEnvironmentRatingColourCode"
                                [matTooltip]="getTooltip(row,'OverallControlEnvironmentRiskRating')">
                                {{row.OverallControlEnvironmentRiskRating}} </td>
                        </ng-container>
                        <ng-container matColumnDef="ResidualRiskRating">
                            <th mat-header-cell *matHeaderCellDef="let row">
                                Residual Risk Rating
                            </th>
                            <td mat-cell *matCellDef="let row" [style.background]="row.ResidualRiskRatingColourCode"
                                [matTooltip]="getTooltip(row,'ResidualRiskRating')"> {{row.ResidualRiskRating}} </td>
                        </ng-container>

                        <ng-container matColumnDef="Comments">
                            <th mat-header-cell *matHeaderCellDef [hidden]="showActionPlanCommentStatus">Self Comments
                             </th>
                            <td mat-cell *matCellDef="let row" [matTooltip]="getTooltip(row,'SelfComment')"
                                [hidden]="showActionPlanStatus">
                                {{row.SelfComment}} </td>
                        </ng-container>

                        <tr mat-row *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row *matRowDef="let row;  columns: displayedColumns;" style="cursor: pointer;" (dblclick)="navigateDetails(row)"></tr>
                    </table>
                    <mat-paginator [pageSize]="10" [pageSizeOptions]="[10, 25, 100]" class="InherentTable"></mat-paginator>
                </mat-card-content>
                <mat-card-actions >
                    <div fxFlex="row" fxLayoutAlign="center center" *ngIf="datanotFound">
                        <span class="Errorinfo">{{datanotFound}} </span>
                      </div>
                        <div style="align-items: center;  display: flex; align-content: space-between;justify-content: space-around;" >
                        <!-- <span style="color: red;">{{this.SelfAssessmentSummaryList.length === 0 ? 'No RCSA is In-Progress for this User' : ''}}</span> -->
                      </div>
                </mat-card-actions>
            </mat-card>
        </div>
    </div>
</mat-action-row>
</div>
